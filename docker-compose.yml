version: "3.7"

services:
  firebird:
    restart: always
    image: jacobalberty/firebird:latest
    container_name: firebird-db
    volumes:
      - ./db/firebird-banco:/var/lib
    ports:
      - 3050:3050
    environment:
      TZ: America/Sao_Paulo
      ISC_PASSWORD: 123456
      FIREBIRD_PASSWORD: 123456
      FIREBIRD_DATABASE: desafio_db
    healthcheck:
      test: "exit 0"
    networks:
      - development-network

  ms-desafio:
    build:
      context: .
      dockerfile: Dockerfile
    container_name: service-java
    volumes:
      - ./db/api-java:/var/lib
    ports:
      - 8031:8031
    networks:
      - development-network
    depends_on:
      - "firebird"

volumes:
  firebird-banco:
  api-java:

networks:
  development-network:
    driver: bridge